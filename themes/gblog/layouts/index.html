<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    {{ partial "head.html" . }}
    <style>
        /* 首页容器上升动画 */
        .homepage-container {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 子元素延迟动画 */
        .profile-section {
            animation: fadeInUp 0.6s ease-out 0.1s both;
        }

        .content-section {
            animation: fadeInUp 0.6s ease-out 0.2s both;
        }
    </style>
</head>

<body>
    {{ partial "header.html" . }}

    <main class="main">
        <!-- 现代化单屏首页 -->
        <div class="homepage-container">
            <div class="homepage-content">
                <!-- 左侧个人信息区域 -->
                <div class="profile-section">
                    <!-- 个人信息卡片 -->
                    <div class="profile-card">
                        <div class="profile-avatar">
                            <img src="https://orz.ai/wp-content/uploads/2025/03/1742489817-7d82f2d0fec986b2fc7c71bdd52d48d9.jpg"
                                alt="博主头像" />
                        </div>
                        <h2 class="profile-name">Gang</h2>
                        <p class="profile-bio">分享技术，记录生活，探索世界的无限可能</p>

                        <!-- 统计信息 -->
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-number">{{ len (where .Site.RegularPages "Type" "posts") }}</div>
                                <div class="stat-label">文章</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">{{ len (where .Site.RegularPages "Type" "photos") }}</div>
                                <div class="stat-label">照片</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">1.2k</div>
                                <div class="stat-label">访问</div>
                            </div>
                        </div>

                        <!-- 社交链接 -->
                        <div class="social-links">
                            <a href="#" class="social-link" title="GitHub">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="#" class="social-link" title="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="social-link" title="微博">
                                <i class="fab fa-weibo"></i>
                            </a>
                        </div>
                    </div>

                    <!-- 技能标签云 -->
                    <div class="skills-card">
                        <h3 class="card-title">
                            <i class="fas fa-code"></i>
                            技能标签
                        </h3>
                        <div class="skills-cloud">
                            <span class="skill-tag skill-primary">Go</span>
                            <span class="skill-tag skill-primary">JavaScript</span>
                            <span class="skill-tag skill-secondary">React</span>
                            <span class="skill-tag skill-secondary">Vue</span>
                            <span class="skill-tag skill-accent">Docker</span>
                            <span class="skill-tag skill-secondary">Kubernetes</span>
                            <span class="skill-tag skill-primary">Python</span>
                            <span class="skill-tag skill-accent">AI/ML</span>
                        </div>
                    </div>

                    <!-- 最近动态 -->
                    <div class="activity-card">
                        <h3 class="card-title">
                            <i class="fas fa-clock"></i>
                            最近动态
                        </h3>
                        <div class="activity-timeline">
                            {{ $allPages := .Site.RegularPages }}
                            {{ $recentPages := first 5 $allPages }}
                            {{ range $recentPages }}
                            <div class="activity-item">
                                <div class="activity-dot"></div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        {{ if eq .Section "posts" }}
                                        发布了新文章《<a href="{{ .Permalink }}">{{ .Title }}</a>》
                                        {{ else if eq .Section "photos" }}
                                        上传了新的摄影作品《<a href="{{ .Permalink }}">{{ .Title }}</a>》
                                        {{ else }}
                                        更新了《<a href="{{ .Permalink }}">{{ .Title }}</a>》
                                        {{ end }}
                                    </div>
                                    <div class="activity-time relative-time" data-timestamp="{{ .Date.Unix }}">{{
                                        .Date.Format "2006-01-02" }}</div>
                                </div>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                </div>

                <!-- 右侧内容区域 -->
                <div class="content-section">
                    <!-- 精选文章 -->
                    <div class="featured-section">
                        <h2 class="section-title">
                            <i class="fas fa-star"></i>
                            精选文章
                        </h2>
                        <div class="featured-posts">
                            {{ $featuredPosts := first 3 (where .Site.RegularPages "Section" "posts") }}
                            {{ range $featuredPosts }}
                            <article class="featured-post">
                                <h3 class="post-title">
                                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                                </h3>
                                <time class="post-date">{{ .Date.Format "2006-01-02" }}</time>
                            </article>
                            {{ end }}
                        </div>
                    </div>

                    <!-- 精选照片 -->
                    <div class="featured-section">
                        <h2 class="section-title">
                            <i class="fas fa-camera"></i>
                            精选照片
                        </h2>
                        <div class="featured-photos">
                            {{ $featuredPhotos := first 4 (where .Site.RegularPages "Section" "photos") }}
                            {{ range $featuredPhotos }}
                            <a href="{{ .Permalink }}" class="featured-photo">
                                <img src="{{ .Params.image }}" alt="{{ .Title }}">
                            </a>
                            {{ end }}
                        </div>
                    </div>

                    <!-- 快速导航 -->
                    <div class="featured-section">
                        <h2 class="section-title">
                            <i class="fas fa-compass"></i>
                            快速导航
                        </h2>
                        <div class="nav-grid">
                            <a href="/posts/" class="nav-item">
                                <i class="fas fa-edit"></i>
                                <span>文章</span>
                            </a>
                            <a href="/series/" class="nav-item">
                                <i class="fas fa-book"></i>
                                <span>系列</span>
                            </a>
                            <a href="/photos/" class="nav-item">
                                <i class="fas fa-images"></i>
                                <span>照片墙</span>
                            </a>
                            <a href="/timeline/" class="nav-item">
                                <i class="fas fa-clock"></i>
                                <span>时间线</span>
                            </a>
                            <a href="/about/" class="nav-item">
                                <i class="fas fa-user"></i>
                                <span>关于我</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    {{ partial "footer.html" . }}
</body>

</html>

<a href="#" class="back-to-top" id="backToTop" aria-label="返回顶部">
    <i class="fas fa-arrow-up"></i>
</a>

<script>
    // 返回顶部按钮
    document.addEventListener('DOMContentLoaded', function () {
        var backToTop = document.getElementById('backToTop');

        window.addEventListener('scroll', function () {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });

        backToTop.addEventListener('click', function (e) {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });

    // 计算相对时间
    function updateRelativeTime() {
        const timeElements = document.querySelectorAll('.relative-time');
        const now = Math.floor(Date.now() / 1000);

        timeElements.forEach(function (element) {
            const timestamp = parseInt(element.getAttribute('data-timestamp'));
            const diff = now - timestamp;

            let relativeTime = '';
            if (diff < 60) {
                relativeTime = '刚刚';
            } else if (diff < 3600) {
                const minutes = Math.floor(diff / 60);
                relativeTime = minutes + '分钟前';
            } else if (diff < 86400) {
                const hours = Math.floor(diff / 3600);
                relativeTime = hours + '小时前';
            } else if (diff < 2592000) {
                const days = Math.floor(diff / 86400);
                relativeTime = days + '天前';
            } else if (diff < 31536000) {
                const months = Math.floor(diff / 2592000);
                relativeTime = months + '个月前';
            } else {
                const years = Math.floor(diff / 31536000);
                relativeTime = years + '年前';
            }

            element.textContent = relativeTime;
        });
    }

    // 初始化相对时间
    updateRelativeTime();

    // 每分钟更新一次
    setInterval(updateRelativeTime, 60000);
</script>
</body>

</html>